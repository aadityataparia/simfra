<template>
  <style>

  </style>
  <p>id - #{bind.location.id}</p>
  <p>name - #{bind.location.name}</p>
  <p>address - #{bind.location.address}</p>
  <p>attractions - #{bind.attractions[0].name}</p>
</template>
<script>
  SF.observedAttributes['sf-location'] = ['data-location-id'];
  SF.defaultBind["sf-location"] = {
    location: {
      id: 'loading',
      name: 'loading',
      address: 'loading'
    },
    attractions: [{
      name: 'loading'
    }]
  }
  SF.attributeChangedCallback["sf-location"] = function(e, attrName, oldVal, newVal) {
    if (attrName == 'data-location-id') {
      SF.API.get('https://tuneout.aadityataparia.com/api/location/' + newVal, {}, function(result) {
        console.log(newVal, result);
        if (result && result.results) {
          let data = {
            location: result.results.location[0],
            attractions: result.results.attractions
          }
          console.log(data);
          SF.setBindData(e, data);
        }
      });
    }
  }
</script>