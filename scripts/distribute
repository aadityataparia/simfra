#!/usr/bin/env bash

set -ex

./scripts/release/config
./scripts/contributors
yarn build
yarn install

# Add dist files not generated before
git ls-files '*/dist/*.js*' | xargs git add
git ls-files '*package.json' | xargs git add
git ls-files '*yarn.lock' | xargs git add
git ls-files '*rollup.config.js' | xargs git add
git ls-files 'misc/*' | xargs git add
(git commit -m "chore: add auto generated files" && git push && exit 1) || exit 0
echo 'Files up to date'
